# Importar arquivo secreto apenas se existir (opcional para produção)
# spring.config.import=application-secret.properties

spring.application.name=NORTHERN LIGHTS
spring.jackson.time-zone=America/Sao_Paulo
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# Configurações de email (usar variáveis de ambiente em produção)
# NOTA: Render pode bloquear porta 587. Use porta 465 (SSL) se 587 não funcionar.
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:465}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
# Para porta 465, usar SSL direto (não STARTTLS)
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.starttls.enable=false
spring.mail.properties.mail.smtp.starttls.required=false
# Timeouts aumentados para Render (conexões podem ser mais lentas)
spring.mail.properties.mail.smtp.connectiontimeout=30000
spring.mail.properties.mail.smtp.timeout=30000
spring.mail.properties.mail.smtp.writetimeout=30000
# Configurações SSL para porta 465
spring.mail.properties.mail.smtp.socketFactory.port=465
spring.mail.properties.mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
spring.mail.properties.mail.smtp.socketFactory.fallback=false
# Retry em caso de falha
spring.mail.properties.mail.smtp.sendpartial=true
spring.mail.properties.mail.debug=false

# Configurações SendGrid (alternativa ao SMTP para Render)
# IMPORTANTE: Render bloqueia portas SMTP (587, 465). Use SendGrid via API REST (porta 443).
# Para usar SendGrid:
# 1. Crie conta em https://sendgrid.com (100 emails/dia grátis)
# 2. Gere API Key em Settings > API Keys
# 3. Configure as variáveis de ambiente no Render:
#    - SENDGRID_API_KEY=sua_api_key_aqui
#    - SENDGRID_FROM_EMAIL=seu_email@dominio.com
#    - EMAIL_PROVIDER=sendgrid (ou deixe "smtp" para usar SMTP com fallback)
sendgrid.api.key=${SENDGRID_API_KEY:}
sendgrid.from.email=${SENDGRID_FROM_EMAIL:}
sendgrid.from.name=${SENDGRID_FROM_NAME:Northern Lights}
# Provider de email: "smtp" (tenta SMTP primeiro, fallback SendGrid) ou "sendgrid" (usa SendGrid diretamente)
email.provider=${EMAIL_PROVIDER:smtp}


